# üí∞ Finance System

> REST API –¥–ª—è —É—á—ë—Ç–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤ –∫–æ–º–ø–∞–Ω–∏–∏. Backend MVP –Ω–∞ Node.js + TypeScript + PostgreSQL —Å —Ä–æ–ª–µ–≤–æ–π –º–æ–¥–µ–ª—å—é, –æ—Ç—á—ë—Ç–∞–º–∏ –∏ –∏–º–ø–æ—Ä—Ç–æ–º CSV.

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–£—á—ë—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** ‚Äî –¥–æ—Ö–æ–¥—ã –∏ —Ä–∞—Å—Ö–æ–¥—ã —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏, –¥–∞—Ç–æ–π, –≤–∞–ª—é—Ç–æ–π –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º
- **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏** ‚Äî –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–∏–ø–æ–≤ `income` / `expense` –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–ø–∞–Ω–∏–∏
- **–û—Ç—á—ë—Ç—ã** ‚Äî –∏—Ç–æ–≥–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥ (–¥–æ—Ö–æ–¥ / —Ä–∞—Å—Ö–æ–¥ / –ø—Ä–∏–±—ã–ª—å), —Ä–∞–∑–±–∏–≤–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, —Ç–∞–π–º–ª–∞–π–Ω –ø–æ –¥–Ω—è–º –∏–ª–∏ –Ω–µ–¥–µ–ª—è–º
- **–ò–º–ø–æ—Ä—Ç CSV** ‚Äî –º–∞—Å—Å–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏–∑ —Ñ–∞–π–ª–∞ —Å —Ç—Ä–µ–∫–∏–Ω–≥–æ–º —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á–∏
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º –∫–æ–º–ø–∞–Ω–∏–∏, –≤—Ö–æ–¥, refresh-—Ç–æ–∫–µ–Ω—ã, –≤—ã—Ö–æ–¥
- **–†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å** ‚Äî —Ç—Ä–∏ —Ä–æ–ª–∏: `OWNER`, `ACCOUNTANT`, `VIEWER` —Å —Ä–∞–∑–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏
- **Swagger UI** ‚Äî –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –∏–∑ –∫–æ—Ä–æ–±–∫–∏
- **Rate limiting** ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞ (20 –∑–∞–ø—Ä–æ—Å–æ–≤ / 15 –º–∏–Ω –¥–ª—è auth, 300 –¥–ª—è API)
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –∑–∞–ø—Ä–æ—Å—ã –∏ –æ—à–∏–±–∫–∏ —á–µ—Ä–µ–∑ Winston

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|---|---|
| Node.js + Express 4 | HTTP-—Å–µ—Ä–≤–µ—Ä |
| TypeScript 5 | –¢–∏–ø–∏–∑–∞—Ü–∏—è |
| Prisma 5 | ORM + –º–∏–≥—Ä–∞—Ü–∏–∏ |
| PostgreSQL | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö |
| JWT (access + refresh) | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è |
| Bcrypt | –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π |
| Zod | –í–∞–ª–∏–¥–∞—Ü–∏—è env –∏ –¥–∞–Ω–Ω—ã—Ö |
| Multer + csv-parse | –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –ø–∞—Ä—Å–∏–Ω–≥ CSV |
| Swagger (jsdoc + ui) | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API |
| Helmet + CORS | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å |
| Winston | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ |
| ts-node-dev | –ì–æ—Ä—è—á–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –≤ dev |

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
finance-system/
‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma          # –°—Ö–µ–º–∞ –ë–î: User, Company, Category, Transaction, ImportJob
‚îÇ   ‚îî‚îÄ‚îÄ seed.ts                # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (3 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è + –∫–æ–º–ø–∞–Ω–∏—è + –∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ env.ts             # –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ Zod
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logger.ts          # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Winston
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ swagger.ts         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Swagger
‚îÇ   ‚îú‚îÄ‚îÄ controllers/           # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤, –≤—ã–∑–æ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ services/              # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, —Ä–∞–±–æ—Ç–∞ —Å Prisma
‚îÇ   ‚îú‚îÄ‚îÄ routes/                # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ + Swagger-–∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.ts            # authenticate / requireRole / requireCompanyAccess
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ upload.ts          # Multer –¥–ª—è CSV
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ requestLogger.ts   # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ errors.ts          # –ö–ª–∞—Å—Å—ã –æ—à–∏–±–æ–∫ + –≥–ª–æ–±–∞–ª—å–Ω—ã–π errorHandler
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ jwt.ts             # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ prisma.ts          # Singleton PrismaClient
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validators.ts      # Zod-—Å—Ö–µ–º—ã –¥–ª—è —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts           # –û–±—â–∏–µ TypeScript-—Ç–∏–ø—ã
‚îÇ   ‚îî‚îÄ‚îÄ index.ts               # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, middleware, —Ä–æ—É—Ç—ã, –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ example-import.csv          # –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
‚îú‚îÄ‚îÄ tsconfig.json
‚îî‚îÄ‚îÄ package.json
```

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js >= 18
- PostgreSQL >= 14
- npm

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
git clone https://github.com/NeystKirill/finance-system.git
cd finance-system
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
DATABASE_URL="postgresql://USER:PASSWORD@localhost:5432/finance_db"

JWT_ACCESS_SECRET=–≤–∞—à_access_—Å–µ–∫—Ä–µ—Ç_–º–∏–Ω–∏–º—É–º_32_—Å–∏–º–≤–æ–ª–∞
JWT_REFRESH_SECRET=–≤–∞—à_refresh_—Å–µ–∫—Ä–µ—Ç_–º–∏–Ω–∏–º—É–º_32_—Å–∏–º–≤–æ–ª–∞
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

PORT=3000
NODE_ENV=development
CORS_ORIGIN=http://localhost:5173
```

> `JWT_ACCESS_SECRET` –∏ `JWT_REFRESH_SECRET` –æ–±—è–∑–∞–Ω—ã –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 32 —Å–∏–º–≤–æ–ª–æ–≤ ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ, –µ—Å–ª–∏ —É—Å–ª–æ–≤–∏–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ.

### 4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã
npm run db:migrate

# –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
npm run db:seed
```

### 5. –ó–∞–ø—É—Å–∫

```bash
# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–∞–≤—Ç–æ-–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞)
npm run dev

# –ü—Ä–æ–¥–∞–∫—à–Ω
npm run build && npm start
```

| URL | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|---|---|
| `http://localhost:3000` | API |
| `http://localhost:3000/docs` | Swagger UI |
| `http://localhost:3000/health` | Healthcheck |

---

## üîë –î–µ–º–æ-–∞–∫–∫–∞—É–Ω—Ç—ã

–ü–æ—Å–ª–µ `npm run db:seed`:

| Email | –ü–∞—Ä–æ–ª—å | –†–æ–ª—å |
|---|---|---|
| `owner@example.com` | `password123` | OWNER |
| `accountant@example.com` | `password123` | ACCOUNTANT |
| `viewer@example.com` | `password123` | VIEWER |

---

## üë• –†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å

| –î–µ–π—Å—Ç–≤–∏–µ | OWNER | ACCOUNTANT | VIEWER |
|---|:---:|:---:|:---:|
| –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ –æ—Ç—á—ë—Ç–æ–≤ | ‚úÖ | ‚úÖ | ‚úÖ |
| –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–π | ‚úÖ | ‚úÖ | ‚úÖ |
| –°–æ–∑–¥–∞–Ω–∏–µ / –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π | ‚úÖ | ‚úÖ | ‚ùå |
| –°–æ–∑–¥–∞–Ω–∏–µ / –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π | ‚úÖ | ‚úÖ | ‚ùå |
| –ò–º–ø–æ—Ä—Ç CSV | ‚úÖ | ‚úÖ | ‚ùå |

---

## üì° API Reference

### Auth

| –ú–µ—Ç–æ–¥ | URL | –î–æ—Å—Ç—É–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|---|
| POST | `/auth/register` | –ü—É–±–ª–∏—á–Ω—ã–π | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è + —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ |
| POST | `/auth/login` | –ü—É–±–ª–∏—á–Ω—ã–π | –í—Ö–æ–¥, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç access + refresh —Ç–æ–∫–µ–Ω—ã |
| POST | `/auth/refresh` | –ü—É–±–ª–∏—á–Ω—ã–π | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ access —Ç–æ–∫–µ–Ω–∞ –ø–æ refresh |
| POST | `/auth/logout` | üîí JWT | –í—ã—Ö–æ–¥ (–∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è refresh —Ç–æ–∫–µ–Ω–∞ –≤ –ë–î) |

### Categories

| –ú–µ—Ç–æ–¥ | URL | –†–æ–ª–∏ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|---|
| GET | `/companies/:id/categories` | –í—Å–µ | –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π (`?type=income\|expense`) |
| POST | `/companies/:id/categories` | OWNER, ACCOUNTANT | –°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é |
| PUT | `/categories/:id` | OWNER, ACCOUNTANT | –û–±–Ω–æ–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é |
| DELETE | `/categories/:id` | OWNER, ACCOUNTANT | –£–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é |

### Transactions

| –ú–µ—Ç–æ–¥ | URL | –†–æ–ª–∏ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|---|
| GET | `/companies/:id/transactions` | –í—Å–µ | –°–ø–∏—Å–æ–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π |
| POST | `/companies/:id/transactions` | OWNER, ACCOUNTANT | –°–æ–∑–¥–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é |
| PUT | `/transactions/:id` | OWNER, ACCOUNTANT | –û–±–Ω–æ–≤–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é |
| DELETE | `/transactions/:id` | OWNER, ACCOUNTANT | –£–¥–∞–ª–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é |

**Query-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã `GET /companies/:id/transactions`:**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| `date_from` | date | –ù–∞—á–∞–ª–æ –ø–µ—Ä–∏–æ–¥–∞ (`YYYY-MM-DD`) |
| `date_to` | date | –ö–æ–Ω–µ—Ü –ø–µ—Ä–∏–æ–¥–∞ |
| `type` | string | `income` –∏–ª–∏ `expense` |
| `category_id` | integer | –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ |
| `limit` | integer | –ó–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É (–ø–æ —É–º–æ–ª—á. 20) |
| `offset` | integer | –°–º–µ—â–µ–Ω–∏–µ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ |

### Reports

| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| GET | `/companies/:id/reports/summary` | –ò—Ç–æ–≥–æ: `total_income`, `total_expense`, `profit` |
| GET | `/companies/:id/reports/by-category` | –°—É–º–º—ã –ø–æ –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥ |
| GET | `/companies/:id/reports/timeline` | –î–∞–Ω–Ω—ã–µ –ø–æ –¥–Ω—è–º –∏–ª–∏ –Ω–µ–¥–µ–ª—è–º (`?group=day\|week`) |

> –í—Å–µ –æ—Ç—á—ë—Ç—ã —Ç—Ä–µ–±—É—é—Ç `?date_from=YYYY-MM-DD&date_to=YYYY-MM-DD`

### Import

| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| POST | `/companies/:id/import/csv` | –ó–∞–≥—Ä—É–∑–∏—Ç—å CSV (`multipart/form-data`, –ø–æ–ª–µ `file`) ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `jobId` |
| GET | `/companies/:id/import/:jobId` | –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏: —Å—Ç—Ä–æ–∫ –≤—Å–µ–≥–æ / —É—Å–ø–µ—à–Ω–æ / —Å –æ—à–∏–±–∫–∞–º–∏ |

---

## üìÑ –§–æ—Ä–º–∞—Ç CSV –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞

```csv
date,type,category,amount,comment
2026-01-05,income,–ü—Ä–æ–¥–∞–∂–∏,150000,–û–ø–ª–∞—Ç–∞ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞
2026-01-10,expense,–ê—Ä–µ–Ω–¥–∞,120000,–û—Ñ–∏—Å —è–Ω–≤–∞—Ä—å
2026-01-15,expense,–ó–∞—Ä–ø–ª–∞—Ç–∞,200000,–í—ã–ø–ª–∞—Ç–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º
```

| –ü–æ–ª–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| `date` | ‚úÖ | –§–æ—Ä–º–∞—Ç `YYYY-MM-DD` |
| `type` | ‚úÖ | `income` –∏–ª–∏ `expense` |
| `category` | ‚úÖ | –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–¥–æ–ª–∂–Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –∫–æ–º–ø–∞–Ω–∏–∏) |
| `amount` | ‚úÖ | –ß–∏—Å–ª–æ –±–æ–ª—å—à–µ 0 |
| `comment` | ‚ùå | –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç |

–ì–æ—Ç–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä: `example-import.csv`

---

## üóÑ –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

| –¢–∞–±–ª–∏—Ü–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|
| `users` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å —Ä–æ–ª—è–º–∏ `OWNER`, `ACCOUNTANT`, `VIEWER` |
| `refresh_tokens` | –ê–∫—Ç–∏–≤–Ω—ã–µ refresh-—Ç–æ–∫–µ–Ω—ã (–∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ logout) |
| `companies` | –ö–æ–º–ø–∞–Ω–∏–∏, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫ OWNER |
| `categories` | –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, —É–Ω–∏–∫–∞–ª—å–Ω—ã –ø–æ `(companyId, name, type)` |
| `transactions` | –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏: —Å—É–º–º–∞, –≤–∞–ª—é—Ç–∞ (–ø–æ —É–º–æ–ª—á. `KZT`), –¥–∞—Ç–∞, –∫–∞—Ç–µ–≥–æ—Ä–∏—è |
| `import_jobs` | –ó–∞–¥–∞—á–∏ –∏–º–ø–æ—Ä—Ç–∞ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `pending / success / failed` –∏ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π –æ—à–∏–±–æ–∫ |

---

## üìú –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

```bash
npm run dev          # –ó–∞–ø—É—Å–∫ —Å –∞–≤—Ç–æ-–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π (ts-node-dev)
npm run build        # –ö–æ–º–ø–∏–ª—è—Ü–∏—è TypeScript ‚Üí dist/
npm start            # –ó–∞–ø—É—Å–∫ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞

npm run db:generate  # –û–±–Ω–æ–≤–∏—Ç—å Prisma Client –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π schema.prisma
npm run db:migrate   # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ (—Å–æ–∑–¥–∞—ë—Ç —Ñ–∞–π–ª—ã –≤ prisma/migrations/)
npm run db:push      # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—Ö–µ–º—É –±–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–∏ (–¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ dev)
npm run db:studio    # –û—Ç–∫—Ä—ã—Ç—å Prisma Studio (–±—Ä–∞—É–∑–µ—Ä–Ω—ã–π GUI –¥–ª—è –ë–î)
npm run db:seed      # –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü–∞—Ä–æ–ª–∏ —Ö–µ—à–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `bcrypt` (10 rounds)
- Access JWT —Å –∫–æ—Ä–æ—Ç–∫–∏–º TTL (15 –º–∏–Ω) + Refresh JWT (7 –¥–Ω–µ–π)
- Refresh-—Ç–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ë–î –∏ –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ
- `helmet` –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞—â–∏—Ç–Ω—ã–µ HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–∏
- Rate limiting: 20 –∑–∞–ø—Ä–æ—Å–æ–≤ / 15 –º–∏–Ω –¥–ª—è `/auth`, 300 ‚Äî –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
- –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ Zod –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ ‚Äî –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–µ –¥–∞—Å—Ç —Å–µ—Ä–≤–µ—Ä—É –ø–æ–¥–Ω—è—Ç—å—Å—è
